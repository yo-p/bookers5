<p id="notice">
  <%= notice %>
</p>

<div class="row">
  <div class="col-md-3">
    <%= render partial: "books/form", locals: { book: @book, user: @user} %>
  </div>

  <div class="col-md-9">

    <% unless current_user == @user %>
      <% if current_user.following?(@user) %>
        <%= form_for(current_user.relationships.find_by(follow_id: @user.id), html: {method: :delete}) do |f| %>
          <%= hidden_field_tag :follow_id, @user.id %>
          <%= f.submit 'Unfollow', class: 'btn btn-danger' %>
        <% end %>
      <% else %>
        <%= form_for(current_user.relationships.build) do |f| %>
          <%= hidden_field_tag :follow_id, @user.id %>
          <%= f.submit 'Follow', class: 'btn btn-primary' %>
        <% end %>
      <% end %>
    <% end %>


    <h1>Books</h1>
    <table class="table table-hover">
      <tr>
        <th>image</th>
        <th>Title</th>
        <th>Opinion</th>
      </tr>
      <% @books.each do |book| %>
      <tr>
        <td><%= attachment_image_tag book.user, :profile_image, :fill, 60, 60, format: 'jpeg', fallback: 'no-image-mini.jpg', size: '60x60' %></td>
        <td><%= link_to book.title, book_path(book) %></td>
        <td><%= book.body %></td>
      </tr>
      <% end %>
    </table>
  </div>
</div>
